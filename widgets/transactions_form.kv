<TransactionFormPopup>:
    title: "‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§•‡§™‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç"
    size_hint: 0.9, 0.9
    auto_dismiss: False

    BoxLayout:
        orientation: 'vertical'
        padding: 10
        spacing: 10

        # üîò Transaction Type Toggle
        BoxLayout:
            size_hint_y: None
            height: 40
            spacing: 10
            ToggleButton:
                id: income_toggle
                text: "‡§Ü‡§Æ‡•ç‡§¶‡§æ‡§®‡•Ä"
                group: "transaction_type"
                state: "down" if root.default_type == "income" else "normal"
                on_state: if self.state == "down": root.set_type("income")
            ToggleButton:
                id: expense_toggle
                text: "‡§ñ‡§∞‡•ç‡§ö"
                group: "transaction_type"
                state: "down" if root.default_type == "expense" else "normal"
                on_state: if self.state == "down": root.set_type("expense")

        # üî¢ Amount Input with Label
        Label:
            text: "‡§∞‡§ï‡§Æ:"
            size_hint_y: None
            height: 30
        TextInput:
            id: amount_input
            hint_text: "‡§∞‡§ï‡§Æ ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç"
            input_filter: 'float'
            multiline: False
            size_hint_y: None
            height: 40

        # üîò Category Selection (dynamically filled from Python)
        Label:
            text: "‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§õ‡§æ‡§®‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç:"
            size_hint_y: None
            height: 30
        GridLayout:
            id: category_radio_group
            cols: 2
            size_hint_y: None
            height: self.minimum_height
            spacing: 5

        # ‚ûï Add Category Button
        Button:
            text: "‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§•‡§™‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç"
            size_hint_y: None
            height: 40
            on_release: root.open_add_category_popup()

        # üë§ Member Selection Input
        Label:
            text: "‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§õ‡§æ‡§®‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç:"
            size_hint_y: None
            height: 30
        TextInput:
            id: member_input
            hint_text: "‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§®‡§æ‡§Æ ‡§ü‡§æ‡§á‡§™ ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç"
            multiline: False
            size_hint_y: None
            height: 40
            on_text: root.update_member_suggestions(self.text)

        # üìÖ Date Input
        Label:
            text: "‡§Æ‡§ø‡§§‡§ø (‡§µ‡§ø.‡§∏‡§Ç.):"
            size_hint_y: None
            height: 30
        TextInput:
            id: date_input
            hint_text: "‡§Æ‡§ø‡§§‡§ø ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç"
            multiline: False
            size_hint_y: None
            height: 40

        # ‚úÖ Buttons (Confirm / Cancel)
        BoxLayout:
            size_hint_y: None
            height: 50
            spacing: 10
            Button:
                text: "‡§∞‡§¶‡•ç‡§¶ ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç"
                on_release: root.dismiss()
            Button:
                text: "‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç"
                on_release: root.submit_transaction()
